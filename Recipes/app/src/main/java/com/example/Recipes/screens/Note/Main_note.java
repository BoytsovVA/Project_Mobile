package com.example.Recipes.screens.Note;

import android.os.Bundle;
import android.view.View;
import androidx.appcompat.app.AppCompatActivity;
import androidx.appcompat.widget.Toolbar;
import androidx.lifecycle.Observer;
import androidx.lifecycle.ViewModelProviders;
import androidx.recyclerview.widget.DividerItemDecoration;
import androidx.recyclerview.widget.LinearLayoutManager;
import androidx.recyclerview.widget.RecyclerView;
import com.example.Recipes.R;
import com.example.Recipes.model_note.Note;
import com.example.Recipes.screens.details_note.NoteDetailsActivity;
import com.google.android.material.floatingactionbutton.FloatingActionButton;
import java.util.List;

public class Main_note extends AppCompatActivity {

  private RecyclerView recyclerView;

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main_note);
    Toolbar toolbar = findViewById(R.id.toolbar);
    setSupportActionBar(toolbar);

    recyclerView = findViewById(R.id.list);
    LinearLayoutManager linearLayoutManager =
        new LinearLayoutManager(this, RecyclerView.VERTICAL, false);
    recyclerView.setLayoutManager(linearLayoutManager);
    recyclerView.addItemDecoration(new DividerItemDecoration(this, DividerItemDecoration.VERTICAL));

    final Adapter adapter = new Adapter();
    recyclerView.setAdapter(adapter);

    FloatingActionButton fab = findViewById(R.id.fab);
    fab.setOnClickListener(
        new View.OnClickListener() {
          @Override
          public void onClick(View view) {
            NoteDetailsActivity.start(Main_note.this, null);
          }
        });

    NoteViewModel mainViewModel = ViewModelProviders.of(this).get(NoteViewModel.class);
    mainViewModel
        .getNoteLiveData()
        .observe(
            this,
            new Observer<List<Note>>() {
              @Override
              public void onChanged(List<Note> notes) {
                adapter.setItems(notes);
              }
            });
  }
}
